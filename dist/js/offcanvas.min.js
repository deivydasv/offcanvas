/*!
 * OffCanvas (https://github.com/deivydasv/offcanvas/)
 * Version: 1.0.0
 * Last update on: 2017-12-10 14:54:28
 * Author: Deivydas Vaseris
 */

"use strict";var OffCanvas=function(){function e(e,t){var n=document.body.querySelectorAll("[data-offcanvas]");Array.prototype.slice.call(n).forEach(function(n){var o;void 0!==n.dataset.offcanvasTarget?o=n.dataset.offcanvasTarget:n.hasAttribute("href")&&(o=n.getAttribute("href"));var s=o?document.body.querySelector(o):null;s&&s.isSameNode(e.element)&&(t?n.classList.add(l.TARGET_VISIBLE):n.classList.remove(l.TARGET_VISIBLE))})}function t(e){e.overlay.addEventListener("click",e.on),e.body.addEventListener("touchstart",e.on),e.body.addEventListener("touchmove",e.on),e.body.addEventListener("touchend",e.on),e.body.addEventListener("touchcancel",e.on)}function n(e){e.overlay.removeEventListener("click",e.on),e.body.removeEventListener("touchstart",e.on),e.body.removeEventListener("touchmove",e.on),e.body.removeEventListener("touchend",e.on),e.body.removeEventListener("touchcancel",e.on)}function o(t,o){switch(t.type){case"click":!function(e,t){t.hide()}(0,o);break;case"touchstart":!function(e,t){if(void 0===e.touches)return;t._touch=!0,t._startTime=new Date,t._startX=t._currentX=e.touches[0].pageX,t._scrollTop=t.element.scrollTop}(t,o);break;case"touchmove":!function(e,t){if(!t._touch)return;t._currentX=e.touches[0].pageX;var n=t._currentX-t._startX;if(Math.abs(t._scrollTop-t.element.scrollTop)>f)return t._touch=!1,void(t.element.style.transform=t.element.style.WebkitTransform=null);if(n>0&&t.isOnLeftSide()||n<0&&!t.isOnLeftSide())return t.element.style.transform=t.element.style.WebkitTransform=null,void(t._currentX=t._startX);t.element.style.transform=t.element.style.WebkitTransform="translateX("+n+"px)"}(t,o);break;case"touchend":!function(t,o){if(!o._touch)return;var s=o.element,f=o.body;o._touch=!1;var h=o._currentX-o._startX,m=new Date-o._startTime;s.offsetWidth;if(Math.abs(h)>d||Math.abs(h)>u&&m<v){e(o,!1),a(s,"pre.hide"),n(o);var y=function(){r(s,y),s.classList.remove(l.TRANSITIONING),s.style.transition=null,s.style.transform=null,c(f,!1),a(s,"hide")};i(s,y),s.style.transition=s.style.Webtransition="-webkit-transform .3s ease-out, transform .3s ease-out",s.style.transform=s.style.WebkitTransform=null,s.classList.add(l.TRANSITIONING),s.classList.remove(l.VISIBLE)}else s.style.transform=s.style.WebkitTransform=null}(0,o);break;case"touchcancel":!function(e,t){if(!t._touch)return;t._touch=!1,t.element.style.transform=t.element.style.WebkitTransform=null}(0,o)}}function s(){return"transition"in document.documentElement.style?"transitionend":"WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":null}function a(e,t){var n;try{n=new Event("offcanvas."+t)}catch(e){(n=document.createEvent("Event")).initEvent("offcanvas."+t,!1,!1)}e.dispatchEvent(n)}function i(e,t){var n=s();n?e.addEventListener(n,t):t()}function r(e,t){var n=s();n&&e.removeEventListener(n,t)}function c(e,t){if(t){var n=e.offsetWidth;e._backupOfpaddingRight=e.style.paddingRight,e._backupOfoverflowX=e.style.overflowX,e.style.overflowY="hidden",e.style.paddingRight=parseFloat(getComputedStyle(e).paddingRight)+(e.offsetWidth-n)+"px"}else e.style.paddingRight=e._backupOfpaddingRight,e.style.overflowY=e._backupOfoverflowX}var l={BASE:"js-offcanvas",OVERLAY:"js-offcanvas-overlay",TRANSITIONING:"is-transitioning",VISIBLE:"is-visible",TARGET_VISIBLE:"is-active",RIGHT_SIDE:"is-right"},f=80,d=60,u=30,v=200,h=function(e){var n=this;if(n.element=function(e){return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):null}(e),!n.element)throw new Error("Element not specified");if(n.element.OffCanvas)return n.element.OffCanvas;n.element.classList.add(l.BASE),n.body=document.body;Array.prototype.slice.call(n.body.children).forEach(function(e){e.classList.contains(l.OVERLAY)&&(n.overlay=e)}),n.overlay||(n.overlay=document.createElement("div"),n.overlay.classList.add(l.OVERLAY),n.body.appendChild(n.overlay)),n.on=function(e){o(e,n)},n.isVisible()&&t(n),n.element.OffCanvas=n};return h.prototype.show=function(n){var o=this,s=o.element,f=o.body;if(!o.isVisible()&&!o.isTransitioning()){var d=o.body.querySelectorAll("."+l.BASE);if(Array.prototype.slice.call(d).forEach(function(e){if(e!=s){var t=e.OffCanvas||new h(e);if(t.isTransitioning())return;t.isVisible()&&t.hide(n)}}),a(s,"pre.show"),e(o,!0),s.scrollTop=0,c(f,!0),n)return s.classList.add(l.VISIBLE),t(o),void a(s,"show");var u=function(){r(s,u),s.classList.remove(l.TRANSITIONING),t(o),a(s,"show")};i(s,u),s.classList.add(l.TRANSITIONING),s.classList.add(l.VISIBLE)}},h.prototype.hide=function(t){var o=this.element,s=this.body;if(this.isVisible()&&!this.isTransitioning()){if(e(this,!1),a(o,"pre.hide"),n(this),t)return o.classList.remove(l.VISIBLE),c(s,!1),void a(o,"hide");var f=function(){r(o,f),o.classList.remove(l.TRANSITIONING),c(s,!1),a(o,"hide")};i(o,f),o.classList.add(l.TRANSITIONING),o.classList.remove(l.VISIBLE)}},h.prototype.toggle=function(e){this.isVisible()?this.hide(e):this.show(e)},h.prototype.isVisible=function(){return this.element.classList.contains(l.VISIBLE)},h.prototype.isTransitioning=function(){return this.element.classList.contains(l.TRANSITIONING)},h.prototype.isOnLeftSide=function(){return!this.element.classList.contains(l.RIGHT_SIDE)},function(){function e(){!function(){var e=document.body.querySelectorAll("[data-offcanvas]");Array.prototype.slice.call(e).forEach(function(e){var t;void 0!==e.dataset.offcanvasTarget?t=e.dataset.offcanvasTarget:e.hasAttribute("href")&&(t=e.getAttribute("href"));var n=t?document.body.querySelector(t):null;if(n){(n.OffCanvas||new h(n)).isVisible()?e.classList.add(l.TARGET_VISIBLE):e.classList.remove(l.TARGET_VISIBLE)}})}(),function(){function e(e){var t;if(void 0!==e.dataset.offcanvasTarget?t=e.dataset.offcanvasTarget:e.hasAttribute("href")&&(t=e.getAttribute("href")),t){var n=document.body.querySelector(t);if(n){var o=(e.dataset.offcanvas.match(/(show|hide)/gi)||["toggle"])[0].toLowerCase(),s=!(""!==e.dataset.offcanvasForce&&!/^(1|true|yes)$/gi.test(e.dataset.offcanvasForce));(n.OffCanvas||new h(n))[o](s)}}}document.body.addEventListener("click",function(t){for(var n,o=t.target;o!=document.body;o=o.parentElement)if(void 0!==o.dataset.offcanvas){n=o;break}n&&(t.preventDefault(),e(n))})}()}"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),h}();